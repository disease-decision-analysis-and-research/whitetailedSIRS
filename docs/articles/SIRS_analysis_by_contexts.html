<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="whitetailedSIRS">
<title>SARS-CoV-2 outbreak characteristics across wild and captive settings • whitetailedSIRS</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="SARS-CoV-2 outbreak characteristics across wild and captive settings">
<meta property="og:description" content="whitetailedSIRS">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">whitetailedSIRS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Connected_Systems.html">SARS-CoV-2 introduction and spread in connected systems</a>
    <a class="dropdown-item" href="../articles/Connected_Systems_initialspill.html">SARS-CoV-2 introduction and spread in connected systems, with an initial spill (in development)</a>
    <a class="dropdown-item" href="../articles/Management_Alternatives_Systems.html">Evaluation of management alternatives across systems</a>
    <a class="dropdown-item" href="../articles/SIRS_analysis_by_contexts.html">SARS-CoV-2 outbreak characteristics across wild and captive settings</a>
    <a class="dropdown-item" href="../articles/SIRS_analysis_by_contexts_initialspill.html">SARS-CoV-2 outbreak characteristics across wild and captive settings, with an intial spillover (in development)</a>
    <a class="dropdown-item" href="../articles/Visualize_by_context.html">Summarize introduction, spread, prevalence, and persistence</a>
    <a class="dropdown-item" href="../articles/default_projection.html">default_projection</a>
    <a class="dropdown-item" href="../articles/example_values.html">example_values</a>
    <a class="dropdown-item" href="../articles/sir_model_description.html">sir_model_description</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/disease-decision-analysis-and-research/whitetailedSIRS/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="SIRS_analysis_by_contexts_files/kePrint-0.0.1/kePrint.js"></script><link href="SIRS_analysis_by_contexts_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>SARS-CoV-2 outbreak characteristics across wild and captive settings</h1>
            <h3 data-toc-skip class="subtitle">Analysis referenced in
Rosenblatt et al. 2023</h3>
            
      
      <small class="dont-index">Source: <a href="https://github.com/disease-decision-analysis-and-research/whitetailedSIRS/blob/HEAD/vignettes/SIRS_analysis_by_contexts.Rmd" class="external-link"><code>vignettes/SIRS_analysis_by_contexts.Rmd</code></a></small>
      <div class="d-none name"><code>SIRS_analysis_by_contexts.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="basic-simulation-parameters">Basic Simulation Parameters<a class="anchor" aria-label="anchor" href="#basic-simulation-parameters"></a>
</h2>
<p>After loading packages, we set several parameters that will remain
constant across simulations. We set a seed for reproducible results
(set.seed). We define the number of iterations for simulations for a
particular context (nsamples). We set human prevalence levels
(I_human_null). We define the duration for the SIRS projection in days
(times).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">23</span><span class="op">)</span></span>
<span><span class="va">nsamples</span> <span class="op">&lt;-</span> <span class="fl">200</span></span>
<span><span class="va">I_human_null</span> <span class="op">&lt;-</span> <span class="fl">0.05</span></span>
<span><span class="va">times</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">120</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="expert-elicitated-parameters">Expert Elicitated Parameters<a class="anchor" aria-label="anchor" href="#expert-elicitated-parameters"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">elicitation_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/draw_elicitation_samples.html">draw_elicitation_samples</a></span><span class="op">(</span>nsamples <span class="op">=</span> <span class="va">nsamples</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="contexts-for-sars-cov-2-introduction-and-spread-in-white-tailed-deer-populations">Contexts for SARS-CoV-2 introduction and spread in white-tailed deer
populations<a class="anchor" aria-label="anchor" href="#contexts-for-sars-cov-2-introduction-and-spread-in-white-tailed-deer-populations"></a>
</h2>
<p>Following Rosenblatt et al. (2023), four contexts were defined,
including outdoor captive ranch, intensive captive facility, wild deer
in rural conditions, and wild deer in suburban conditions. In this RMD
file, these contexts will be simulated independently of each other.
Below we briefly describe the context, calculate various proximity rates
and infection probabilities, and derive transmission rates of SARS-CoV-2
in each of these contexts.</p>
<div class="section level3">
<h3 id="outdoor-captive-ranch">Outdoor captive ranch<a class="anchor" aria-label="anchor" href="#outdoor-captive-ranch"></a>
</h3>
<p>We modeled a population of captive deer housed in an outdoor ranching
facility. We assumed proximity rates between deer in this context was
the same as estimated in wild contexts, with the increase of these
proximity rates due to supplemental feeding. We assume that proximity
rates between humans and deer in this context are the same as those
estimated for the wild, suburban context, but the duration of these
proximity events are longer, reflecting those typical of a captive
facility.</p>
<div class="section level4">
<h4 id="proximity-rates">Proximity Rates<a class="anchor" aria-label="anchor" href="#proximity-rates"></a>
</h4>
<p>Proximity rates were derived from a rate model developed by Habib et
al. (2011), as a function of habitat conditions (habitat) and density
(nwild/A_W). For all uses of the Habib et al. (2011) model in this
analysis, we fixed density at 10 deer per sq km and habitat at 26%
wooded habitat (classified in the calc_contact_rate function as
type_contact = “med”). We also used expert elicitation estimates of the
probability of direct contact for fluid transmission.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nWild</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html" class="external-link">rpois</a></span><span class="op">(</span><span class="va">nsamples</span>,<span class="fl">1000</span><span class="op">)</span> <span class="co">#Abundance</span></span>
<span><span class="va">A_w</span> <span class="op">&lt;-</span> <span class="fl">100</span> <span class="co">#Area</span></span>
<span><span class="va">habitat</span> <span class="op">&lt;-</span> <span class="st">"med"</span> <span class="co">#Habitat classification</span></span>
<span><span class="va">sigma_season</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="co">#Season adjustment for proximity rate</span></span>
<span></span>
<span><span class="va">sigma_dc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_EE_param_vals.html">get_EE_param_vals</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">elicitation_data</span>, my_param <span class="op">=</span> <span class="st">"Direct Contact Probability"</span><span class="op">)</span> <span class="co">#Probability of direct contact between deer, given proximity.</span></span></code></pre></div>
<p>Next, we define various proximity rates for the ranch context. Object
names reflect other parameters that must be included in the SIRS ODE
solver (e.g. c_ww_ranch, set to 0).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">c_ww_ranch</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nsamples</span><span class="op">)</span> <span class="co">#Deer-to-deer proximity rate in wild (set to 0; events per day).</span></span>
<span><span class="va">c_cw_null</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nsamples</span><span class="op">)</span> <span class="co">#Deer-to-deer proximity rate along fenceline (set to 0; events per day).</span></span>
<span><span class="va">c_cc_ranch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_contact_rate.html">calc_contact_rate</a></span><span class="op">(</span>nsamples <span class="op">=</span> <span class="va">nsamples</span>, type_contact <span class="op">=</span> <span class="va">habitat</span>, N_w <span class="op">=</span> <span class="va">nWild</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="fu"><a href="../reference/get_EE_param_vals.html">get_EE_param_vals</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">elicitation_data</span>, my_param <span class="op">=</span> <span class="st">"Proximity rate with baiting (17 events without baiting)"</span><span class="op">)</span><span class="op">/</span><span class="fl">17</span><span class="op">)</span> <span class="co">#Deer-to-deer proximity rate in ranch context, mimicing wild proximity rates with the influence of baiting (events per day).</span></span>
<span></span>
<span><span class="va">c_hw_ranch</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nsamples</span><span class="op">)</span> <span class="co">#Human-to-deer proximity rate in wild (set to 0; events per day).</span></span>
<span><span class="va">c_hc_ranch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_EE_param_vals.html">get_EE_param_vals</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">elicitation_data</span>, my_param <span class="op">=</span> <span class="st">"Deer-Human Proximity Rate, Suburban (per 120 days)"</span><span class="op">)</span> <span class="op">/</span><span class="fl">120</span> <span class="co">#Human-to-deer proximity rate in ranch context, mimicing suburban proximitty rates (events per day).</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="infection-probabilities">Infection probabilities<a class="anchor" aria-label="anchor" href="#infection-probabilities"></a>
</h4>
<p>We calculate infection probabilities for three transmission pathways
- aerosol transmission from deer-to-deer, fluid transmission from
deer-to-deer, and aerosol transmission from human-to-deer. Below, we
will use various package functions to define parameters to estimate the
infection probability given proximity or contact.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">C_nu_human</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">nsamples</span>, mean <span class="op">=</span> <span class="fl">10</span><span class="op">^</span><span class="fl">5.6</span>, sd <span class="op">=</span> <span class="fl">10</span><span class="op">^</span><span class="fl">1.2</span><span class="op">)</span><span class="co">#viral load in humans (genomic copies per ml)</span></span>
<span><span class="va">C_nu_deer</span> <span class="op">&lt;-</span> <span class="fl">10</span><span class="op">^</span><span class="fl">5.6</span> <span class="op">*</span> <span class="fu"><a href="../reference/get_EE_param_vals.html">get_EE_param_vals</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">elicitation_data</span>, my_param <span class="op">=</span> <span class="st">"Viral Load"</span><span class="op">)</span> <span class="co">#viral load in deer saliva, relative to humans (genomic copies per ml)</span></span>
<span></span>
<span><span class="va">r_deer</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_EE_param_vals.html">get_EE_param_vals</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">elicitation_data</span>, my_param <span class="op">=</span> <span class="st">"Dose-Response"</span><span class="op">)</span><span class="co"># Dose response coefficient for deer and SARS-CoV-2</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Infection probability calculation of aerosol transmission from deer-to-deer</span></span>
<span><span class="va">t_contact_deer_deer_null</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_EE_param_vals.html">get_EE_param_vals</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">elicitation_data</span>, my_param <span class="op">=</span> <span class="st">"Deer Proximity Duration (minutes)"</span><span class="op">)</span> <span class="co">#Estimate duration of proximity event...</span></span>
<span><span class="va">nu_aero_deer_deer_ranch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_nu_aero.html">calc_nu_aero</a></span><span class="op">(</span>C_nu <span class="op">=</span> <span class="va">C_nu_deer</span>,</span>
<span>                                        t_contact <span class="op">=</span> <span class="va">t_contact_deer_deer_null</span> <span class="op">/</span> <span class="fl">60</span>,</span>
<span>                                        r <span class="op">=</span> <span class="va">r_deer</span>, nsamples <span class="op">=</span> <span class="va">nsamples</span><span class="op">)</span> <span class="co">#...and estimate probability of infection given that duration of proximity event.</span></span>
<span></span>
<span><span class="va">nu_aero_deer_deer_wild_null</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nsamples</span><span class="op">)</span> <span class="co">#Estimate infection probability in out in the wild as 0 (needs to be included for SIRS ODE equations)</span></span>
<span></span>
<span><span class="co">#Infection probability of 0.1 ml of saliva being transferred between deer on contact</span></span>
<span><span class="va">nu_dc_deer_deer_null</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_nu_dc.html">calc_nu_dc</a></span><span class="op">(</span>C_nu <span class="op">=</span> <span class="va">C_nu_deer</span>, nsamples <span class="op">=</span> <span class="va">nsamples</span><span class="op">)</span> <span class="co">#Calculate infection probability</span></span>
<span></span>
<span><span class="co">#Infection probability calculation of aerosol transmission from humans-to-deer</span></span>
<span><span class="va">t_contact_deer_human_ranch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_EE_param_vals.html">get_EE_param_vals</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">elicitation_data</span>, my_param <span class="op">=</span> <span class="st">"Deer-Human Proximity Duration, Captive (minutes)"</span><span class="op">)</span> <span class="co">#Estimate duration of human-deer proximity event in ranch facility context...</span></span>
<span><span class="va">nu_aero_deer_human_ranch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_nu_aero.html">calc_nu_aero</a></span><span class="op">(</span>ER <span class="op">=</span> <span class="fl">0.53</span>, C_nu <span class="op">=</span> <span class="va">C_nu_human</span>, </span>
<span>                                        t_contact <span class="op">=</span> <span class="va">t_contact_deer_human_ranch</span> <span class="op">/</span> <span class="fl">60</span>,</span>
<span>                                        r <span class="op">=</span> <span class="va">r_deer</span>, nsamples <span class="op">=</span> <span class="va">nsamples</span><span class="op">)</span><span class="co">#... and calculate infection probability given the duration of a human-deer proximity event.</span></span>
<span><span class="va">nu_aero_deer_human_wild_null</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nsamples</span><span class="op">)</span><span class="co">#Estimate human-to-deer infection probability out in the wild as 0 (needs to be included for SIRS ODE equations)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="recovery-and-immunity-loss-rates">Recovery and Immunity Loss Rates<a class="anchor" aria-label="anchor" href="#recovery-and-immunity-loss-rates"></a>
</h4>
<p>For all simulations, animals recover from their infection at a given
rate (gamma_recov), and lose their immunity and become susceptible at a
given rate (alpha_immunity). We use a recovery rate based on a 6 day
infectious period (Palmer et al. 2021), and immunity loss rate based on
expert elicited estimates. The recovery rate is repeated across all
iterations of a simulation (nsamples). The immunity loss rate is derived
from [nsamples] draws from an error distribution estimated by the expert
elicitation process.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gamma_recov</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="fl">6</span>, <span class="va">nsamples</span><span class="op">)</span></span>
<span><span class="va">alpha_immunity_null</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">/</span> <span class="fu"><a href="../reference/get_EE_param_vals.html">get_EE_param_vals</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">elicitation_data</span>, my_param <span class="op">=</span> <span class="st">'Temporary Immunity'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="compile-parameters-and-run-sirs-ode-solver-for-context">Compile parameters and run SIRS ODE solver for context<a class="anchor" aria-label="anchor" href="#compile-parameters-and-run-sirs-ode-solver-for-context"></a>
</h4>
<p>Now that all parameters have been defined for an SIRS model, we run
three functions that define starting conditions, arrange the parameters
defined above and calculated derived parameters, and run the ODE
solver.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">captive.inits</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/initial_compartments.html">initial_compartments</a></span><span class="op">(</span>S_wild_prop <span class="op">=</span> <span class="fl">0</span>, draws <span class="op">=</span> <span class="va">nsamples</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ranch.params</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/alternative.html">alternative</a></span><span class="op">(</span>alpha_immunity <span class="op">=</span> <span class="va">alpha_immunity_null</span>,</span>
<span>                            c_ww <span class="op">=</span> <span class="va">c_ww_ranch</span>, c_cw <span class="op">=</span> <span class="va">c_cw_null</span>,c_cc <span class="op">=</span> <span class="va">c_cc_ranch</span>,</span>
<span>                            c_hw <span class="op">=</span> <span class="va">c_hw_ranch</span>, c_hc <span class="op">=</span> <span class="va">c_hc_ranch</span>,</span>
<span>                            nu_aero_deer_deer_wild <span class="op">=</span> <span class="va">nu_aero_deer_deer_wild_null</span>, nu_aero_deer_deer_captive <span class="op">=</span> <span class="va">nu_aero_deer_deer_ranch</span>, nu_aero_deer_human_wild <span class="op">=</span> <span class="va">nu_aero_deer_human_wild_null</span>, nu_aero_deer_human_capt <span class="op">=</span> <span class="va">nu_aero_deer_human_ranch</span>, sigma_dc <span class="op">=</span> <span class="va">sigma_dc</span>, nu_dc_deer_deer <span class="op">=</span> <span class="va">nu_dc_deer_deer_null</span>, gamma_recov <span class="op">=</span> <span class="va">gamma_recov</span>, I_human <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">I_human_null</span>, <span class="va">nsamples</span><span class="op">)</span>, boost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nsamples</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">proj.ranch</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run.html">run</a></span><span class="op">(</span>iter <span class="op">=</span> <span class="va">nsamples</span>, initial_compartments <span class="op">=</span> <span class="va">captive.inits</span>, parameters <span class="op">=</span> <span class="va">ranch.params</span>, times <span class="op">=</span> <span class="va">times</span>, name <span class="op">=</span> <span class="st">"Outdoor ranch"</span><span class="op">)</span></span></code></pre></div>
<p>If we look at the proj.ranch object, we can see the items stored in
the first list item, including the iteration identifier (run_id),
initial compartment sizes (inits), SIRS parameters (params), and the
start and end of the projected infection in the ranch context.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">proj.ranch</span><span class="op">$</span><span class="va">run_id</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="va">proj.ranch</span><span class="op">$</span><span class="va">inits</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt;               S_wild               I_wild               R_wild </span></span>
<span><span class="co">#&gt;                    0                    0                    0 </span></span>
<span><span class="co">#&gt;    I_wild_cumulative            S_captive            I_captive </span></span>
<span><span class="co">#&gt;                    0                    1                    0 </span></span>
<span><span class="co">#&gt;            R_captive I_captive_cumulative </span></span>
<span><span class="co">#&gt;                    0                    0</span></span>
<span><span class="va">proj.ranch</span><span class="op">$</span><span class="va">params</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; alpha_immunity   beta_aero_ww   beta_aero_cw   beta_aero_cc   beta_aero_hw </span></span>
<span><span class="co">#&gt;   0.0078654614   0.0000000000   0.0000000000   0.1564436786   0.0000000000 </span></span>
<span><span class="co">#&gt;   beta_aero_hc     beta_dc_ww     beta_dc_cw     beta_dc_cc    gamma_recov </span></span>
<span><span class="co">#&gt;   0.0001100403   0.0000000000   0.0000000000   0.0039325117   0.1666666667 </span></span>
<span><span class="co">#&gt;        I_human          boost </span></span>
<span><span class="co">#&gt;   0.0500000000   0.0000000000</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">proj.ranch</span><span class="op">$</span><span class="va">ode_proj</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;      time S_wild I_wild R_wild I_wild_cumulative S_captive    I_captive</span></span>
<span><span class="co">#&gt; [1,]    0      0      0      0                 0 1.0000000 0.000000e+00</span></span>
<span><span class="co">#&gt; [2,]    1      0      0      0                 0 0.9999941 5.484743e-06</span></span>
<span><span class="co">#&gt; [3,]    2      0      0      0                 0 0.9999873 1.093505e-05</span></span>
<span><span class="co">#&gt; [4,]    3      0      0      0                 0 0.9999796 1.635111e-05</span></span>
<span><span class="co">#&gt; [5,]    4      0      0      0                 0 0.9999711 2.173310e-05</span></span>
<span><span class="co">#&gt; [6,]    5      0      0      0                 0 0.9999617 2.708124e-05</span></span>
<span><span class="co">#&gt;         R_captive I_captive_cumulative</span></span>
<span><span class="co">#&gt; [1,] 0.000000e+00         0.000000e+00</span></span>
<span><span class="co">#&gt; [2,] 4.552724e-07         5.941806e-06</span></span>
<span><span class="co">#&gt; [3,] 1.814661e-06         1.276042e-05</span></span>
<span><span class="co">#&gt; [4,] 4.065383e-06         2.045033e-05</span></span>
<span><span class="co">#&gt; [5,] 7.196358e-06         2.900672e-05</span></span>
<span><span class="co">#&gt; [6,] 1.119294e-05         3.842320e-05</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">proj.ranch</span><span class="op">$</span><span class="va">ode_proj</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;        time S_wild I_wild R_wild I_wild_cumulative S_captive    I_captive</span></span>
<span><span class="co">#&gt; [116,]  115      0      0      0                 0 0.9960029 0.0004408439</span></span>
<span><span class="co">#&gt; [117,]  116      0      0      0                 0 0.9959550 0.0004432580</span></span>
<span><span class="co">#&gt; [118,]  117      0      0      0                 0 0.9959070 0.0004456517</span></span>
<span><span class="co">#&gt; [119,]  118      0      0      0                 0 0.9958591 0.0004480252</span></span>
<span><span class="co">#&gt; [120,]  119      0      0      0                 0 0.9958111 0.0004503785</span></span>
<span><span class="co">#&gt; [121,]  120      0      0      0                 0 0.9957631 0.0004527118</span></span>
<span><span class="co">#&gt;          R_captive I_captive_cumulative</span></span>
<span><span class="co">#&gt; [116,] 0.003556224          0.005227912</span></span>
<span><span class="co">#&gt; [117,] 0.003601749          0.005304001</span></span>
<span><span class="co">#&gt; [118,] 0.003647316          0.005380471</span></span>
<span><span class="co">#&gt; [119,] 0.003692923          0.005457318</span></span>
<span><span class="co">#&gt; [120,] 0.003738564          0.005534538</span></span>
<span><span class="co">#&gt; [121,] 0.003784237          0.005612130</span></span></code></pre></div>
<p>We can now continue to run the ODE solver for other contexts. Only
new parameters will be defined for these other context; several will be
referenced from the ranch context above.</p>
</div>
</div>
<div class="section level3">
<h3 id="intensive-captive-facility">Intensive captive facility<a class="anchor" aria-label="anchor" href="#intensive-captive-facility"></a>
</h3>
<p>We considered captive deer held in a facility focused on captive
breeding or exposition. Deer in this facility were predominantly indoors
with high stocking densities and low indoor air exchange rates (AER;
1-hr). We estimated all proximity rates and duration of proximity using
expert elicitation.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">c_ww_intensive</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nsamples</span><span class="op">)</span></span>
<span><span class="va">c_cc_intensive</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_EE_param_vals.html">get_EE_param_vals</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">elicitation_data</span>, my_param <span class="op">=</span> <span class="st">"Deer-Deer Proximity Rate, Captive (per day)"</span><span class="op">)</span></span>
<span><span class="va">c_hw_intensive</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nsamples</span><span class="op">)</span></span>
<span><span class="va">c_hc_intensive</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_EE_param_vals.html">get_EE_param_vals</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">elicitation_data</span>, my_param <span class="op">=</span> <span class="st">"Deer-Human Proximity Rate, Suburban (per 120 days)"</span><span class="op">)</span> <span class="op">/</span><span class="fl">120</span></span>
<span></span>
<span><span class="va">nu_aero_deer_deer_intensive</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_nu_aero.html">calc_nu_aero</a></span><span class="op">(</span>C_nu <span class="op">=</span> <span class="va">C_nu_deer</span>,</span>
<span>                                            t_contact <span class="op">=</span> <span class="va">t_contact_deer_deer_null</span> <span class="op">/</span> <span class="fl">60</span>,</span>
<span>                                            r <span class="op">=</span> <span class="va">r_deer</span>, nsamples <span class="op">=</span> <span class="va">nsamples</span>, AER <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">nsamples</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">t_contact_deer_human_intensive</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_EE_param_vals.html">get_EE_param_vals</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">elicitation_data</span>, my_param <span class="op">=</span> <span class="st">"Deer-Human Proximity Duration, Captive (minutes)"</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">nu_aero_deer_human_intensive</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_nu_aero.html">calc_nu_aero</a></span><span class="op">(</span>ER <span class="op">=</span> <span class="fl">0.53</span>, C_nu <span class="op">=</span> <span class="va">C_nu_human</span>, </span>
<span>                                            t_contact <span class="op">=</span> <span class="va">t_contact_deer_human_intensive</span> <span class="op">/</span> <span class="fl">60</span>,</span>
<span>                                            r <span class="op">=</span> <span class="va">r_deer</span>, nsamples <span class="op">=</span> <span class="va">nsamples</span>, AER <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">nsamples</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">intensive.params</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/alternative.html">alternative</a></span><span class="op">(</span></span>
<span>   c_ww <span class="op">=</span> <span class="va">c_ww_intensive</span>, c_cw <span class="op">=</span> <span class="va">c_cw_null</span>, c_cc <span class="op">=</span> <span class="va">c_cc_intensive</span>, </span>
<span>   c_hw <span class="op">=</span> <span class="va">c_hw_intensive</span>, c_hc <span class="op">=</span> <span class="va">c_hc_intensive</span>, </span>
<span>   nu_aero_deer_deer_wild <span class="op">=</span> <span class="va">nu_aero_deer_human_wild_null</span>, nu_aero_deer_deer_captive <span class="op">=</span>  <span class="va">nu_aero_deer_deer_intensive</span>, nu_aero_deer_human_wild <span class="op">=</span> <span class="va">nu_aero_deer_human_wild_null</span>, nu_aero_deer_human_capt <span class="op">=</span> <span class="va">nu_aero_deer_human_intensive</span>, nu_dc_deer_deer <span class="op">=</span> <span class="va">nu_dc_deer_deer_null</span>,</span>
<span>   alpha_immunity <span class="op">=</span> <span class="va">alpha_immunity_null</span>, sigma_dc <span class="op">=</span> <span class="va">sigma_dc</span>, gamma_recov <span class="op">=</span> <span class="va">gamma_recov</span>, I_human <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">I_human_null</span>, <span class="va">nsamples</span><span class="op">)</span>, boost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nsamples</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">proj.intensive</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run.html">run</a></span><span class="op">(</span>iter <span class="op">=</span> <span class="va">nsamples</span>, initial_compartments <span class="op">=</span> <span class="va">captive.inits</span>, parameters <span class="op">=</span> <span class="va">intensive.params</span>, times <span class="op">=</span> <span class="va">times</span>, name <span class="op">=</span> <span class="st">"Intensive facility"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="wild-deer-in-rural-conditions">Wild deer in rural conditions<a class="anchor" aria-label="anchor" href="#wild-deer-in-rural-conditions"></a>
</h3>
<p>In this context, wild deer are free-ranging in an area with a rural
human density (3.1 humans/km2). We assumed that deer in this context
were subject to regulated hunting either using still-hunting, or ground
blind or treestand approaches. We also assumed that baiting and backyard
feeding were illegal but may still occur. We again used Habib et al.’s
(2011) proximity rate model. We estimated the duration of deer-deer
proximity events, and rates and duration of human-deer proximity events
using expert elicitation.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">c_ww_rural</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_contact_rate.html">calc_contact_rate</a></span><span class="op">(</span>nsamples <span class="op">=</span> <span class="va">nsamples</span>, type_contact <span class="op">=</span> <span class="va">habitat</span>, N_w <span class="op">=</span> <span class="va">nWild</span>, sigma_season <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">c_cc_rural</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nsamples</span><span class="op">)</span></span>
<span><span class="va">c_hw_rural</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_EE_param_vals.html">get_EE_param_vals</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">elicitation_data</span>, my_param <span class="op">=</span> <span class="st">"Deer-Human Proximity Rate, Rural (per 120 days)"</span><span class="op">)</span> <span class="op">/</span><span class="fl">120</span></span>
<span><span class="va">c_hc_rural</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nsamples</span><span class="op">)</span></span>
<span></span>
<span><span class="va">t_contact_deer_human_rural</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_EE_param_vals.html">get_EE_param_vals</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">elicitation_data</span>, my_param <span class="op">=</span> <span class="st">"Deer-Human Proximity Duration, Rural (minutes)"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">nu_aero_deer_deer_rural</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_nu_aero.html">calc_nu_aero</a></span><span class="op">(</span>C_nu <span class="op">=</span> <span class="va">C_nu_deer</span>,</span>
<span>                                        t_contact <span class="op">=</span> <span class="va">t_contact_deer_deer_null</span> <span class="op">/</span> <span class="fl">60</span>,</span>
<span>                                        r <span class="op">=</span> <span class="va">r_deer</span>, nsamples <span class="op">=</span> <span class="va">nsamples</span>, AER <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">4</span>, <span class="va">nsamples</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">nu_aero_deer_deer_captive_null</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nsamples</span><span class="op">)</span></span>
<span></span>
<span><span class="va">nu_aero_deer_human_rural</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_nu_aero.html">calc_nu_aero</a></span><span class="op">(</span>ER <span class="op">=</span> <span class="fl">0.53</span>, C_nu <span class="op">=</span> <span class="va">C_nu_human</span>, </span>
<span>                                        t_contact <span class="op">=</span> <span class="va">t_contact_deer_human_rural</span> <span class="op">/</span> <span class="fl">60</span>,</span>
<span>                                        r <span class="op">=</span> <span class="va">r_deer</span>, nsamples <span class="op">=</span> <span class="va">nsamples</span>, AER <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">4</span>, <span class="va">nsamples</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">nu_aero_deer_human_captive_null</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nsamples</span><span class="op">)</span></span>
<span></span>
<span><span class="va">wild.inits</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/initial_compartments.html">initial_compartments</a></span><span class="op">(</span>S_captive_prop <span class="op">=</span> <span class="fl">0</span>, draws <span class="op">=</span> <span class="va">nsamples</span><span class="op">)</span></span>
<span></span>
<span><span class="va">rural.params</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/alternative.html">alternative</a></span><span class="op">(</span>c_ww <span class="op">=</span> <span class="va">c_ww_rural</span>, c_cw <span class="op">=</span> <span class="va">c_cw_null</span>, c_cc <span class="op">=</span> <span class="va">c_cc_rural</span>, c_hw <span class="op">=</span> <span class="va">c_hw_rural</span>, c_hc <span class="op">=</span> <span class="va">c_hc_rural</span>, nu_aero_deer_deer_wild <span class="op">=</span> <span class="va">nu_aero_deer_deer_rural</span>, nu_aero_deer_deer_captive <span class="op">=</span> <span class="va">nu_aero_deer_deer_captive_null</span>, nu_aero_deer_human_wild <span class="op">=</span> <span class="va">nu_aero_deer_human_rural</span>,  nu_aero_deer_human_capt <span class="op">=</span> <span class="va">nu_aero_deer_human_captive_null</span>, nu_dc_deer_deer <span class="op">=</span> <span class="va">nu_dc_deer_deer_null</span>,alpha_immunity <span class="op">=</span> <span class="va">alpha_immunity_null</span>, sigma_dc <span class="op">=</span> <span class="va">sigma_dc</span>, gamma_recov <span class="op">=</span> <span class="va">gamma_recov</span>, I_human <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">I_human_null</span>, <span class="va">nsamples</span><span class="op">)</span>, boost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nsamples</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">proj.rural</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run.html">run</a></span><span class="op">(</span>iter <span class="op">=</span> <span class="va">nsamples</span>, initial_compartments <span class="op">=</span> <span class="va">wild.inits</span>, parameters <span class="op">=</span> <span class="va">rural.params</span>, times <span class="op">=</span> <span class="va">times</span>, name <span class="op">=</span> <span class="st">"Wild, rural"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="wild-deer-in-suburban-conditions">Wild deer in suburban conditions<a class="anchor" aria-label="anchor" href="#wild-deer-in-suburban-conditions"></a>
</h3>
<p>Wild deer are free-ranging in an area of suburban human density (100
humans/km2). Deer-to-deer proximity rates were derived using the same
parameters as used in the rural setting. The primary difference between
this context and the wild, rural context are higher human-to-deer
proximity rates and longer duration of proximity events as estimated by
expert elicitation.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">c_ww_suburban</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_contact_rate.html">calc_contact_rate</a></span><span class="op">(</span>nsamples <span class="op">=</span> <span class="va">nsamples</span>, type_contact <span class="op">=</span> <span class="va">habitat</span>, N_w <span class="op">=</span> <span class="va">nWild</span>, sigma_season <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">c_cc_suburban</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nsamples</span><span class="op">)</span></span>
<span><span class="va">c_hw_suburban</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_EE_param_vals.html">get_EE_param_vals</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">elicitation_data</span>, my_param <span class="op">=</span> <span class="st">"Deer-Human Proximity Rate, Suburban (per 120 days)"</span><span class="op">)</span> <span class="op">/</span><span class="fl">120</span></span>
<span><span class="va">c_hc_suburban</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nsamples</span><span class="op">)</span></span>
<span></span>
<span><span class="va">t_contact_deer_human_suburban</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_EE_param_vals.html">get_EE_param_vals</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">elicitation_data</span>, my_param <span class="op">=</span> <span class="st">"Deer-Human Proximity Duration, Suburban (minutes)"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">nu_aero_deer_deer_suburban</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_nu_aero.html">calc_nu_aero</a></span><span class="op">(</span>C_nu <span class="op">=</span> <span class="va">C_nu_deer</span>,</span>
<span>                                        t_contact <span class="op">=</span> <span class="va">t_contact_deer_deer_null</span> <span class="op">/</span> <span class="fl">60</span>,</span>
<span>                                        r <span class="op">=</span> <span class="va">r_deer</span>, nsamples <span class="op">=</span> <span class="va">nsamples</span>, AER <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">4</span>, <span class="va">nsamples</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">nu_aero_deer_human_suburban</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_nu_aero.html">calc_nu_aero</a></span><span class="op">(</span>ER <span class="op">=</span> <span class="fl">0.53</span>, C_nu <span class="op">=</span> <span class="va">C_nu_human</span>, </span>
<span>                                        t_contact <span class="op">=</span> <span class="va">t_contact_deer_human_suburban</span> <span class="op">/</span> <span class="fl">60</span>,</span>
<span>                                        r <span class="op">=</span> <span class="va">r_deer</span>, nsamples <span class="op">=</span> <span class="va">nsamples</span>, AER <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">4</span>, <span class="va">nsamples</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">suburban.params</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/alternative.html">alternative</a></span><span class="op">(</span>c_ww <span class="op">=</span> <span class="va">c_ww_suburban</span>, c_cw <span class="op">=</span> <span class="va">c_cw_null</span>, c_cc <span class="op">=</span> <span class="va">c_cc_suburban</span>, c_hw <span class="op">=</span> <span class="va">c_hw_suburban</span>, c_hc <span class="op">=</span> <span class="va">c_hc_suburban</span>, nu_aero_deer_deer_wild <span class="op">=</span> <span class="va">nu_aero_deer_deer_suburban</span>, nu_aero_deer_deer_captive <span class="op">=</span> <span class="va">nu_aero_deer_deer_captive_null</span>, nu_aero_deer_human_wild <span class="op">=</span> <span class="va">nu_aero_deer_human_suburban</span>,  nu_aero_deer_human_capt <span class="op">=</span> <span class="va">nu_aero_deer_human_captive_null</span>, nu_dc_deer_deer <span class="op">=</span> <span class="va">nu_dc_deer_deer_null</span>,alpha_immunity <span class="op">=</span> <span class="va">alpha_immunity_null</span>, sigma_dc <span class="op">=</span> <span class="va">sigma_dc</span>, gamma_recov <span class="op">=</span> <span class="va">gamma_recov</span>, I_human <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">I_human_null</span>, <span class="va">nsamples</span><span class="op">)</span>, boost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">nsamples</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">proj.suburban</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run.html">run</a></span><span class="op">(</span>iter <span class="op">=</span> <span class="va">nsamples</span>, initial_compartments <span class="op">=</span> <span class="va">wild.inits</span>, parameters <span class="op">=</span> <span class="va">suburban.params</span>, times <span class="op">=</span> <span class="va">times</span>, name <span class="op">=</span> <span class="st">"Wild, suburban"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="compile-dataset-across-all-contexts">Compile dataset across all contexts<a class="anchor" aria-label="anchor" href="#compile-dataset-across-all-contexts"></a>
</h2>
<p>Finally, we are going to summarize four measurements for each
iteration to summarize across contexts. First, we combine the
projections for each context into one list object, and summarize the
average prevalence (Infected) and SARS-CoV-2 persists to the end of the
120-day projection (Persists). We save this resulting summary dataframe
for future use.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sirs_results_contexts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">proj.ranch</span>,<span class="va">proj.intensive</span>, <span class="va">proj.rural</span>, <span class="va">proj.suburban</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sirs_results_contexts</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>ode_df <span class="op">=</span> <span class="fu">map</span><span class="op">(</span><span class="va">ode_proj</span>, <span class="va">as.data.frame</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pull</span><span class="op">(</span><span class="va">ode_df</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">list_rbind</span><span class="op">(</span>names_to <span class="op">=</span> <span class="st">"run_id"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span><span class="va">.</span>, Context <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">sirs_results_contexts</span><span class="op">$</span><span class="va">Context</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,<span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">times</span><span class="op">)</span><span class="op">*</span><span class="va">nsamples</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">sirs_results_contexts</span><span class="op">$</span><span class="va">Context</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,<span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">times</span><span class="op">)</span><span class="op">*</span><span class="va">nsamples</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">sirs_results_contexts</span><span class="op">$</span><span class="va">Context</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>,<span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">times</span><span class="op">)</span><span class="op">*</span><span class="va">nsamples</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">sirs_results_contexts</span><span class="op">$</span><span class="va">Context</span><span class="op">)</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span>,<span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">times</span><span class="op">)</span><span class="op">*</span><span class="va">nsamples</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">Context</span>, <span class="va">run_id</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>   <span class="fu">summarize</span><span class="op">(</span>Wild <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">I_wild</span><span class="op">)</span>, Captive <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">I_captive</span><span class="op">)</span>, Infected <span class="op">=</span> <span class="va">Wild</span> <span class="op">+</span> <span class="va">Captive</span>, Persist_wild <span class="op">=</span> <span class="fu">last</span><span class="op">(</span><span class="va">I_wild</span><span class="op">)</span> <span class="op">&gt;=</span><span class="fl">0.0001</span>, Persist_captive <span class="op">=</span> <span class="fu">last</span><span class="op">(</span><span class="va">I_captive</span><span class="op">)</span> <span class="op">&gt;=</span><span class="fl">0.0001</span>, Persist <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">as.logical</a></span><span class="op">(</span><span class="va">Persist_wild</span> <span class="op">+</span> <span class="va">Persist_captive</span><span class="op">)</span>, Cumulative_wild_infections <span class="op">=</span> <span class="fu">last</span><span class="op">(</span><span class="va">I_wild_cumulative</span><span class="op">)</span>, Cumulative_captive_infections <span class="op">=</span> <span class="fu">last</span><span class="op">(</span><span class="va">I_captive_cumulative</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span><span class="va">.</span>, Context <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">Context</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Outdoor ranch"</span>, <span class="st">"Intensive facility"</span>, <span class="st">"Wild, rural"</span>,<span class="st">"Wild, suburban"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>   <span class="fu">select</span><span class="op">(</span><span class="va">.</span>, <span class="op">-</span><span class="va">Wild</span>, <span class="op">-</span><span class="va">Captive</span>, <span class="op">-</span><span class="va">Persist_wild</span>, <span class="op">-</span><span class="va">Persist_captive</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">.</span>,<span class="va">Context</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">.</span>, <span class="va">Context</span>, <span class="va">run_id</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">Prev_Persist_df</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Prev_Persist_df</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   Context [1]</span></span></span>
<span><span class="co">#&gt;   Context  run_id Infected Persist Cumulative_wild_infe…¹ Cumulative_captive_i…²</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Outdoor…      1 0.000<span style="text-decoration: underline;">258</span> TRUE                         0                0.005<span style="text-decoration: underline;">61</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Outdoor…      2 0.054<span style="text-decoration: underline;">9</span>   TRUE                         0                1.12   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Outdoor…      3 0.023<span style="text-decoration: underline;">0</span>   TRUE                         0                0.490  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Outdoor…      4 0.044<span style="text-decoration: underline;">6</span>   TRUE                         0                0.900  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Outdoor…      5 0.050<span style="text-decoration: underline;">5</span>   TRUE                         0                1.02   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Outdoor…      6 0.000<span style="text-decoration: underline;">804</span> TRUE                         0                0.019<span style="text-decoration: underline;">2</span> </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ abbreviated names: ¹​Cumulative_wild_infections,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ²​Cumulative_captive_infections</span></span></span></code></pre></div>
<p>Next, we step through each context’s parameters to estimate strength
of introduction (quantified as force-of-infection) and spread
(quantified as basic reproductive number R0). We then combine with the
prevalence and persistence summary above to create the dataset that we
will visualized in another vignette.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ranch.df</span> <span class="op">&lt;-</span> <span class="fu">list_cbind</span><span class="op">(</span><span class="fu">map</span><span class="op">(</span><span class="va">ranch.params</span>, <span class="va">as_data_frame</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">ranch.df</span><span class="op">)</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ranch.params</span><span class="op">)</span></span>
<span><span class="va">ranch.df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span><span class="va">.</span>, run_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">Prev_Persist_df</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">Prev_Persist_df</span><span class="op">$</span><span class="va">Context</span><span class="op">==</span><span class="st">"Outdoor ranch"</span><span class="op">)</span>,<span class="st">"run_id"</span><span class="op">]</span><span class="op">)</span><span class="op">+</span><span class="fl">0</span><span class="op">:</span><span class="op">(</span><span class="va">nsamples</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>,r0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="op">(</span><span class="va">beta_aero_ww</span><span class="op">+</span><span class="va">beta_aero_cc</span><span class="op">+</span><span class="va">beta_dc_ww</span><span class="op">+</span><span class="va">beta_dc_cc</span><span class="op">)</span><span class="op">/</span><span class="va">gamma_recov</span><span class="op">)</span>,</span>
<span>         FOI <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="op">(</span><span class="va">beta_aero_hw</span><span class="op">+</span><span class="va">beta_aero_hc</span><span class="op">)</span><span class="op">*</span><span class="va">I_human</span><span class="op">)</span>,</span>
<span>         Context <span class="op">=</span> <span class="st">"Outdoor ranch"</span>, Setting <span class="op">=</span> <span class="st">"Captive"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">.</span>, <span class="va">run_id</span>, <span class="va">Context</span>,  <span class="va">Setting</span>, <span class="va">r0</span>, <span class="va">FOI</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">ranch.r0.FOI</span></span>
<span></span>
<span><span class="va">intensive.df</span> <span class="op">&lt;-</span> <span class="fu">list_cbind</span><span class="op">(</span><span class="fu">map</span><span class="op">(</span><span class="va">intensive.params</span>, <span class="va">as_data_frame</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">intensive.df</span><span class="op">)</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">intensive.params</span><span class="op">)</span></span>
<span><span class="va">intensive.df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span><span class="va">.</span>, run_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">Prev_Persist_df</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">Prev_Persist_df</span><span class="op">$</span><span class="va">Context</span><span class="op">==</span><span class="st">"Intensive facility"</span><span class="op">)</span>,<span class="st">"run_id"</span><span class="op">]</span><span class="op">)</span><span class="op">+</span><span class="fl">0</span><span class="op">:</span><span class="op">(</span><span class="va">nsamples</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>,r0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="op">(</span><span class="va">beta_aero_ww</span><span class="op">+</span><span class="va">beta_aero_cc</span><span class="op">+</span><span class="va">beta_dc_ww</span><span class="op">+</span><span class="va">beta_dc_cc</span><span class="op">)</span><span class="op">/</span><span class="va">gamma_recov</span><span class="op">)</span>,</span>
<span>         FOI <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="op">(</span><span class="va">beta_aero_hw</span><span class="op">+</span><span class="va">beta_aero_hc</span><span class="op">)</span><span class="op">*</span><span class="va">I_human</span><span class="op">)</span>,</span>
<span>         Context <span class="op">=</span> <span class="st">"Intensive facility"</span>, Setting <span class="op">=</span> <span class="st">"Captive"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">.</span>, <span class="va">run_id</span>, <span class="va">Context</span>,  <span class="va">Setting</span>, <span class="va">r0</span>, <span class="va">FOI</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">intensive.r0.FOI</span></span>
<span></span>
<span><span class="va">rural.df</span> <span class="op">&lt;-</span> <span class="fu">list_cbind</span><span class="op">(</span><span class="fu">map</span><span class="op">(</span><span class="va">rural.params</span>, <span class="va">as_data_frame</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">rural.df</span><span class="op">)</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">rural.params</span><span class="op">)</span></span>
<span><span class="va">rural.df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span><span class="va">.</span>, run_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">Prev_Persist_df</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">Prev_Persist_df</span><span class="op">$</span><span class="va">Context</span><span class="op">==</span><span class="st">"Wild, rural"</span><span class="op">)</span>,<span class="st">"run_id"</span><span class="op">]</span><span class="op">)</span><span class="op">+</span><span class="fl">0</span><span class="op">:</span><span class="op">(</span><span class="va">nsamples</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>,r0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="op">(</span><span class="va">beta_aero_ww</span><span class="op">+</span><span class="va">beta_aero_cc</span><span class="op">+</span><span class="va">beta_dc_ww</span><span class="op">+</span><span class="va">beta_dc_cc</span><span class="op">)</span><span class="op">/</span><span class="va">gamma_recov</span><span class="op">)</span>,</span>
<span>         FOI <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="op">(</span><span class="va">beta_aero_hw</span><span class="op">+</span><span class="va">beta_aero_hc</span><span class="op">)</span><span class="op">*</span><span class="va">I_human</span><span class="op">)</span>,</span>
<span>         Context <span class="op">=</span> <span class="st">"Wild, rural"</span>, Setting <span class="op">=</span> <span class="st">"Wild"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">.</span>, <span class="va">run_id</span>, <span class="va">Context</span>, <span class="va">Setting</span>,  <span class="va">r0</span>, <span class="va">FOI</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">rural.r0.FOI</span></span>
<span></span>
<span><span class="va">suburban.df</span> <span class="op">&lt;-</span> <span class="fu">list_cbind</span><span class="op">(</span><span class="fu">map</span><span class="op">(</span><span class="va">suburban.params</span>, <span class="va">as_data_frame</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">suburban.df</span><span class="op">)</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">suburban.params</span><span class="op">)</span></span>
<span><span class="va">suburban.df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span><span class="va">.</span>, run_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">Prev_Persist_df</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">Prev_Persist_df</span><span class="op">$</span><span class="va">Context</span><span class="op">==</span><span class="st">"Wild, suburban"</span><span class="op">)</span>,<span class="st">"run_id"</span><span class="op">]</span><span class="op">)</span><span class="op">+</span><span class="fl">0</span><span class="op">:</span><span class="op">(</span><span class="va">nsamples</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>,r0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="op">(</span><span class="va">beta_aero_ww</span><span class="op">+</span><span class="va">beta_aero_cc</span><span class="op">+</span><span class="va">beta_dc_ww</span><span class="op">+</span><span class="va">beta_dc_cc</span><span class="op">)</span><span class="op">/</span><span class="va">gamma_recov</span><span class="op">)</span>,</span>
<span>         FOI <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="op">(</span><span class="va">beta_aero_hw</span><span class="op">+</span><span class="va">beta_aero_hc</span><span class="op">)</span><span class="op">*</span><span class="va">I_human</span><span class="op">)</span>,</span>
<span>         Context <span class="op">=</span> <span class="st">"Wild, suburban"</span>, Setting <span class="op">=</span> <span class="st">"Wild"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">.</span>, <span class="va">run_id</span>, <span class="va">Context</span>, <span class="va">Setting</span>, <span class="va">r0</span>, <span class="va">FOI</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">suburban.r0.FOI</span></span>
<span></span>
<span><span class="va">r0.FOI</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">ranch.r0.FOI</span>,<span class="va">intensive.r0.FOI</span>, <span class="va">rural.r0.FOI</span>,<span class="va">suburban.r0.FOI</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Merge with average prevalence (step 1) and persistence (step 2)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">r0.FOI</span>,<span class="va">Prev_Persist_df</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"run_id"</span>,<span class="st">"Infected"</span>, <span class="st">"Persist"</span>, <span class="st">"Cumulative_wild_infections"</span>, <span class="st">"Cumulative_captive_infections"</span><span class="op">)</span><span class="op">]</span>, by <span class="op">=</span> <span class="st">"run_id"</span>, all.x <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>Context <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">Context</span>,  levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Outdoor ranch"</span>, <span class="st">"Intensive facility"</span>, <span class="st">"Wild, rural"</span>,<span class="st">"Wild, suburban"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">df</span></span></code></pre></div>
<p>We will develop plots and tables of this results data frame. Here is
a simple summary to end this vignette, with median spread (R0),
probability introduction from humans (FOI, log10-transformed), average
prevalence for the 120-day fall projection (Prevalence), and if there
are any infections at the end of the 120-day fall projection
(Persistence).</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">.</span>, <span class="va">Context</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">reframe</span><span class="op">(</span><span class="va">.</span>, R0.Median <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">r0</span>,probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span><span class="op">)</span><span class="op">)</span>,<span class="fl">2</span><span class="op">)</span>, FOI.Median <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log10</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">FOI</span>,probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,<span class="fl">2</span><span class="op">)</span>, Prevalence.Median <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">Infected</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span><span class="op">)</span><span class="op">)</span>,<span class="fl">2</span><span class="op">)</span>, Persistence.Median <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">Persist</span><span class="op">)</span><span class="op">/</span><span class="va">nsamples</span>,<span class="fl">2</span><span class="op">)</span>, Cumulative_cases_wild <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">Cumulative_wild_infections</span><span class="op">)</span>, Cumulative_cases_captive <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">Cumulative_captive_infections</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">median.results</span></span>
<span></span>
<span><span class="va">median.results</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">kbl</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">kable_paper</span><span class="op">(</span><span class="st">"hover"</span>, full_width <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<table class="table  lightable-paper lightable-hover" style='font-family: "Arial Narrow", arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;'>
<thead><tr>
<th style="text-align:left;">
Context
</th>
<th style="text-align:right;">
R0.Median
</th>
<th style="text-align:right;">
FOI.Median
</th>
<th style="text-align:right;">
Prevalence.Median
</th>
<th style="text-align:right;">
Persistence.Median
</th>
<th style="text-align:right;">
Cumulative_cases_wild
</th>
<th style="text-align:right;">
Cumulative_cases_captive
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Outdoor ranch
</td>
<td style="text-align:right;">
1.76
</td>
<td style="text-align:right;">
-5.11
</td>
<td style="text-align:right;">
0.04
</td>
<td style="text-align:right;">
0.82
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.8197571
</td>
</tr>
<tr>
<td style="text-align:left;">
Intensive facility
</td>
<td style="text-align:right;">
6.44
</td>
<td style="text-align:right;">
-4.70
</td>
<td style="text-align:right;">
0.07
</td>
<td style="text-align:right;">
0.96
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
1.4586504
</td>
</tr>
<tr>
<td style="text-align:left;">
Wild, rural
</td>
<td style="text-align:right;">
0.87
</td>
<td style="text-align:right;">
-7.04
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.44
</td>
<td style="text-align:right;">
0.0001849
</td>
<td style="text-align:right;">
0.0000000
</td>
</tr>
<tr>
<td style="text-align:left;">
Wild, suburban
</td>
<td style="text-align:right;">
0.87
</td>
<td style="text-align:right;">
-5.76
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.53
</td>
<td style="text-align:right;">
0.0024825
</td>
<td style="text-align:right;">
0.0000000
</td>
</tr>
</tbody>
</table>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Javi Rudolph, Fer Arce, Elias Rosenblatt.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
